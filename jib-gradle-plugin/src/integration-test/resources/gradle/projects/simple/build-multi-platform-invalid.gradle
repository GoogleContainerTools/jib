plugins {
    id 'java'
    id 'com.google.cloud.tools.jib'
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    implementation files('libs/dependency-1.0.0.jar')
}

jib {
    from {
        image = 'busybox@sha256:4f47c01fa91355af2865ac10fef5bf6ec9c7f42ad2321377c21e844427972977'
        platforms {
            platform {
                architecture = 'arm'
                os = 'linux'
            }
            platform {
                architecture = 's390x'
                os = 'linux'
            }
        }
    }
    to {
        image = System.getProperty('_TARGET_IMAGE')
    }
}
