plugins {
    id 'java'
    id 'com.google.cloud.tools.jib'
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    implementation files('libs/dependency-1.0.0.jar')
}

jib {
    from {
        image = 'eclipse-temurin:8-jdk-focal'
        platforms {
            platform {
                architecture = 'amd64'
                os = 'linux'
            }
            platform {
                architecture = 'arm64'
                os = 'linux'
            }
        }
    }
    to {
        image = System.getProperty('_TARGET_IMAGE')
    }
}
